"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),i=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;const s=Object.create({});function n(e){return!!s[e]&&s[e][window.location.href]||null}function o(e,t){if(n(t))return n(t)||100;let i=e;if(i.getBoundingClientRect().width<32)for(i=i.parentNode;"BODY"!==i.tagName&&i.getBoundingClientRect().width<=32;)i=i.parentNode;return Math.ceil(i.getBoundingClientRect().width/window.innerWidth*100)}const r="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype,a=window.IntersectionObserver;const l=e=>Object.entries(e).map(([e,t])=>`${t} ${e}w`).join(", ");function c(e){const c=t.useRef(null),d=t.useRef(null),u=e.aspectRatio?`${100/e.aspectRatio}%`:e.height,g="eager"===e.loading||e.critical,m=!!n(e.src),[p,f]=t.useState({sizes:m?n(e.src):e.sizes,isVisible:m||g||r||!a,shouldFadeIn:!m||e.fadeIn,imgLoaded:m||!1}),h=e=>f(t=>({...t,...e}));function b(){var t,i;m||(t=e.src,i=Number(p.sizes),s[t]={...s[t]||{},[window.location.href]:i},h({imgLoaded:!0}))}t.useEffect(()=>{m||h({sizes:e.sizes||o(d.current,e.src)});const t=!p.isVisible&&function(e,t){const i=new window.IntersectionObserver(([s])=>{(s.isIntersecting||s.intersectionRatio>0)&&(i.unobserve(e),t())},{rootMargin:"200px"});return i.observe(e),i}(d.current,()=>h({isVisible:!0}));if(g){const e=c.current;e&&e.complete&&b()}return()=>{t&&t.unobserve(d.current)}},[]);const w=!p.shouldFadeIn||p.imgLoaded,v={position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:e.fit,objectPosition:e.position},y={opacity:w?1:0,transition:p.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:"none",...e.imgStyle},I={transition:e.transparent&&p.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:void 0,transitionDelay:e.transparent?"0":`${e.durationFadeIn}ms`},z={opacity:p.imgLoaded?0:1,...p.shouldFadeIn&&I,...e.imgStyle,...e.placeholderStyle};return i.createElement("div",{style:{position:"relative",overflow:"hidden"},className:e.className},i.createElement("div",{style:{width:"100%",paddingBottom:u,...e.sizerStyle},ref:d,className:e.sizerClass}),e.bgColor&&i.createElement("div",{className:e.placeholderClass,style:{backgroundColor:e.bgColor,...v,...z}}),!e.bgColor&&e.placeholder&&i.createElement("img",{src:e.placeholder,alt:e.alt,className:e.placeholderClass,style:{...v,...z}}),p.isVisible&&i.createElement("picture",null,e.webpSrcSet&&i.createElement("source",{type:"image/webp",srcSet:l(e.webpSrcSet),sizes:p.sizes?`${p.sizes}vw`:void 0}),e.srcSet&&i.createElement("source",{srcSet:l(e.srcSet),sizes:p.sizes?`${p.sizes}vw`:void 0}),i.createElement("img",{ref:c,src:e.src,className:e.imgClass,alt:e.alt,sizes:`${p.sizes}vw`,loading:g?"eager":e.loading,onLoad:b,style:{...v,...y}})))}c.defaultProps={loading:"lazy",fadeIn:!0,fit:"cover",position:"center",height:"100%",durationFadeIn:500,alt:""},exports.Image=c;
//# sourceMappingURL=index.js.map
