"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var a=Object.create({});function s(e){return!!a[e]&&a[e][window.location.href]||null}function c(e,t){a[e]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a[e]||{},{},i({},window.location.href,t))}function l(e,t){if(s(t))return s(t)||100;var r=e;if(r.getBoundingClientRect().width<32)for(r=r.parentNode;"BODY"!==r.tagName&&r.getBoundingClientRect().width<=32;)r=r.parentNode;return Math.ceil(r.getBoundingClientRect().width/window.innerWidth*100)}var u="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype,d=window.IntersectionObserver;var f=function(e){return Object.entries(e).map((function(e){var t=n(e,2),r=t[0],i=t[1];return"".concat(i," ").concat(r,"w")})).join(", ")};function p(e){const i=t.useRef(null),o=t.useRef(null),a=e.aspectRatio?`${100/e.aspectRatio}%`:e.height,p="eager"===e.loading||e.critical,b=!!s(e.src),[g,m]=t.useState({sizes:b?s(e.src):e.sizes,isVisible:b||p||u||!d,shouldFadeIn:!b||e.fadeIn,imgLoaded:b||!1}),y=e=>m(t=>({...t,...e}));function v(){b||(c(e.src,Number(g.sizes)),y({imgLoaded:!0}))}t.useEffect(()=>{b||y({sizes:e.sizes||l(o.current,e.src)});const t=!g.isVisible&&function(e,t){var r=new window.IntersectionObserver((function(i){var o=n(i,1)[0];(o.isIntersecting||o.intersectionRatio>0)&&(r.unobserve(e),t())}),{rootMargin:"200px"});return r.observe(e),r}(o.current,()=>y({isVisible:!0}));if(p){const e=i.current;e&&e.complete&&v()}return()=>{t&&t.unobserve(o.current)}},[]);const h=!g.shouldFadeIn||g.imgLoaded,w={position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:e.fit,objectPosition:e.position},O={opacity:h?1:0,transition:g.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:"none",...e.imgStyle},j={transition:e.transparent&&g.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:void 0,transitionDelay:e.transparent?"0":`${e.durationFadeIn}ms`},I={opacity:g.imgLoaded?0:1,...g.shouldFadeIn&&j,...e.imgStyle,...e.placeholderStyle};return r.createElement("div",{style:{position:"relative",overflow:"hidden"},className:e.className},r.createElement("div",{style:{width:"100%",paddingBottom:a},ref:o}),e.bgColor&&r.createElement("div",{className:e.placeholderClass,style:{backgroundColor:e.bgColor,...w,...I}}),!e.bgColor&&e.placeholder&&r.createElement("img",{src:e.placeholder,alt:e.alt,className:e.placeholderClass,style:{...w,...I}}),g.isVisible&&r.createElement("picture",null,e.webpSrcSet&&r.createElement("source",{type:"image/webp",srcSet:f(e.webpSrcSet),sizes:g.sizes?`${g.sizes}vw`:void 0}),e.srcSet&&r.createElement("source",{srcSet:f(e.srcSet),sizes:g.sizes?`${g.sizes}vw`:void 0}),r.createElement("img",{ref:i,src:e.src,className:e.imgClass,alt:e.alt,sizes:`${g.sizes}vw`,loading:p?"eager":e.loading,onLoad:v,style:{...w,...O}})))}p.defaultProps={loading:"lazy",fadeIn:!0,fit:"cover",position:"center",height:"100%",durationFadeIn:500,alt:""},exports.Image=p;
//# sourceMappingURL=index.js.map
