"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),i=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;const n=Object.create({});function s(e){return!!n[e]&&n[e][window.location.href]||null}function o(e,t){if(s(t))return s(t)||100;let i=e;if(i.getBoundingClientRect().width<32)for(i=i.parentNode;"BODY"!==i.tagName&&i.getBoundingClientRect().width<=32;)i=i.parentNode;return Math.ceil(i.getBoundingClientRect().width/window.innerWidth*100)}const r="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype,a=window.IntersectionObserver;const l=e=>Object.entries(e).map(([e,t])=>`${t} ${e}w`).join(", ");function c(e){const c=t.useRef(null),d=t.useRef(null),u=e.aspectRatio?`${100/e.aspectRatio}%`:e.height,g="eager"===e.loading||e.critical,p=!!s(e.src),[m,f]=t.useState({sizes:p?s(e.src):e.sizes,isVisible:p||g||r||!a,shouldFadeIn:!p||e.fadeIn,imgLoaded:p||!1}),h=e=>f(t=>({...t,...e}));function b(){var t,i;p||(t=e.src,i=Number(m.sizes),n[t]={...n[t]||{},[window.location.href]:i},h({imgLoaded:!0}))}t.useEffect(()=>{p||h({sizes:e.sizes||o(d.current,e.src)});const t=!m.isVisible&&function(e,t){const i=new window.IntersectionObserver(([n])=>{(n.isIntersecting||n.intersectionRatio>0)&&(i.unobserve(e),t())},{rootMargin:"200px"});return i.observe(e),i}(d.current,()=>h({isVisible:!0}));if(g){const e=c.current;e&&e.complete&&b()}return()=>{t&&t.unobserve(d.current)}},[]);const w=!m.shouldFadeIn||m.imgLoaded,v={position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:e.fit,objectPosition:e.position},y={opacity:w?1:0,transition:m.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:"none",...e.imgStyle},I={transition:e.transparent&&m.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:void 0,transitionDelay:e.transparent?"0":`${e.durationFadeIn}ms`},z={opacity:m.imgLoaded?0:1,...m.shouldFadeIn&&I,...e.imgStyle,...e.placeholderStyle};return i.createElement("div",{style:{position:"relative",overflow:"hidden"},className:e.className},i.createElement("div",{style:{width:"100%",paddingBottom:u},ref:d}),e.bgColor&&i.createElement("div",{className:e.placeholderClass,style:{backgroundColor:e.bgColor,...v,...z}}),!e.bgColor&&e.placeholder&&i.createElement("img",{src:e.placeholder,alt:e.alt,className:e.placeholderClass,style:{...v,...z}}),m.isVisible&&i.createElement("picture",null,e.webpSrcSet&&i.createElement("source",{type:"image/webp",srcSet:l(e.webpSrcSet),sizes:m.sizes?`${m.sizes}vw`:void 0}),e.srcSet&&i.createElement("source",{srcSet:l(e.srcSet),sizes:m.sizes?`${m.sizes}vw`:void 0}),i.createElement("img",{ref:c,src:e.src,className:e.imgClass,alt:e.alt,sizes:`${m.sizes}vw`,loading:g?"eager":e.loading,onLoad:b,style:{...v,...y}})))}c.defaultProps={loading:"lazy",fadeIn:!0,fit:"cover",position:"center",height:"100%",durationFadeIn:500,alt:""},exports.Image=c;
//# sourceMappingURL=index.js.map
