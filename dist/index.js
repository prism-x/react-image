"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),i=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;const n="undefined"!=typeof window,s=n?t.useLayoutEffect:t.useEffect,o=Object.create({});function r(e){return!!o[e]&&o[e][window.location.href]||null}function a(e,t){if(r(t))return r(t)||100;let i=e;if(i.getBoundingClientRect().width<32)for(i=i.parentNode;"BODY"!==i.tagName&&i.getBoundingClientRect().width<=32;)i=i.parentNode;return Math.ceil(i.getBoundingClientRect().width/window.innerWidth*100)}const l="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype,c=n&&window.IntersectionObserver;const d=e=>Object.entries(e).map(([e,t])=>`${t} ${e}w`).join(", ");function u(e){const n=t.useRef(null),u=t.useRef(null),p=e.aspectRatio?`${100/e.aspectRatio}%`:e.height,g="eager"===e.loading||e.critical,m=!!r(e.src),[f,h]=t.useState({sizes:m?r(e.src):e.sizes||100,isVisible:m||g||l||!c,shouldFadeIn:!m||e.fadeIn,imgLoaded:m||!1}),w=e=>h(t=>({...t,...e}));function b(){var t,i;m||(t=e.src,i=Number(f.sizes),o[t]={...o[t]||{},[window.location.href]:i},w({imgLoaded:!0}))}s(()=>{m||w({sizes:e.sizes||a(u.current,e.src)});const t=!f.isVisible&&function(e,t){const i=new window.IntersectionObserver(([n])=>{(n.isIntersecting||n.intersectionRatio>0)&&(i.unobserve(e),t())},{rootMargin:"200px"});return i.observe(e),i}(u.current,()=>w({isVisible:!0}));if(g){const e=n.current;e&&e.complete&&b()}return()=>{t&&t.unobserve(u.current)}},[]);const y=!f.shouldFadeIn||f.imgLoaded,v={position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:e.fit,objectPosition:e.position},I={opacity:y?1:0,transition:f.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:"none",...e.imgStyle},z={transition:e.transparent&&f.shouldFadeIn?`opacity ${e.durationFadeIn}ms`:void 0,transitionDelay:e.transparent?"0":`${e.durationFadeIn}ms`},S={opacity:f.imgLoaded?0:1,...f.shouldFadeIn&&z,...e.imgStyle,...e.placeholderStyle};return i.createElement("div",{style:{position:"relative",overflow:"hidden"},className:e.className},i.createElement("div",{style:{width:"100%",paddingBottom:p,...e.sizerStyle},ref:u,className:e.sizerClass}),e.bgColor&&i.createElement("div",{className:e.placeholderClass,style:{backgroundColor:e.bgColor,...v,...S}}),!e.bgColor&&e.placeholder&&i.createElement("img",{src:e.placeholder,alt:e.alt,className:e.placeholderClass,style:{...v,...S}}),f.isVisible&&i.createElement("picture",null,e.webpSrcSet&&i.createElement("source",{type:"image/webp",srcSet:d(e.webpSrcSet),sizes:f.sizes?`${f.sizes}vw`:void 0}),e.srcSet&&i.createElement("source",{srcSet:d(e.srcSet),sizes:f.sizes?`${f.sizes}vw`:void 0}),i.createElement("img",{ref:n,src:e.src,className:e.imgClass,alt:e.alt,sizes:`${f.sizes}vw`,loading:g?"eager":e.loading,onLoad:b,style:{...v,...I}})))}u.defaultProps={loading:"lazy",fadeIn:!0,fit:"cover",position:"center",height:"100%",durationFadeIn:500,alt:""},exports.Image=u;
//# sourceMappingURL=index.js.map
