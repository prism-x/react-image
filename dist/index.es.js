import e,{useRef as t,useState as r,useEffect as n}from"react";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var s=Object.create({});function c(e){return!!s[e]&&s[e][window.location.href]||null}function l(e,t){s[e]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},s[e]||{},{},o({},window.location.href,t))}function u(e,t){if(c(t))return c(t)||100;var r=e;if(r.getBoundingClientRect().width<32)for(r=r.parentNode;"BODY"!==r.tagName&&r.getBoundingClientRect().width<=32;)r=r.parentNode;return Math.ceil(r.getBoundingClientRect().width/window.innerWidth*100)}var d="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype,p=window.IntersectionObserver;var f=function(e){return Object.entries(e).map((function(e){var t=i(e,2),r=t[0],n=t[1];return"".concat(n," ").concat(r,"w")})).join(", ")};function g(o){const a=t(null),s=t(null),g=o.aspectRatio?`${100/o.aspectRatio}%`:o.height,b="eager"===o.loading||o.critical,m=!!c(o.src),[y,h]=r({sizes:m?c(o.src):o.sizes,isVisible:m||b||d||!p,shouldFadeIn:!m||o.fadeIn,imgLoaded:m||!1}),v=e=>h(t=>({...t,...e}));function w(){m||(l(o.src,Number(y.sizes)),v({imgLoaded:!0}))}n(()=>{m||v({sizes:o.sizes||u(s.current,o.src)});const e=!y.isVisible&&function(e,t){var r=new window.IntersectionObserver((function(n){var o=i(n,1)[0];(o.isIntersecting||o.intersectionRatio>0)&&(r.unobserve(e),t())}),{rootMargin:"200px"});return r.observe(e),r}(s.current,()=>v({isVisible:!0}));if(b){const e=a.current;e&&e.complete&&w()}return()=>{e&&e.unobserve(s.current)}},[]);const O=!y.shouldFadeIn||y.imgLoaded,j={position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:o.fit,objectPosition:o.position},I={opacity:O?1:0,transition:y.shouldFadeIn?`opacity ${o.durationFadeIn}ms`:"none",...o.imgStyle},S={transition:o.transparent&&y.shouldFadeIn?`opacity ${o.durationFadeIn}ms`:void 0,transitionDelay:o.transparent?"0":`${o.durationFadeIn}ms`},z={opacity:y.imgLoaded?0:1,...y.shouldFadeIn&&S,...o.imgStyle,...o.placeholderStyle};return e.createElement("div",{style:{position:"relative",overflow:"hidden"},className:o.className},e.createElement("div",{style:{width:"100%",paddingBottom:g},ref:s}),o.bgColor&&e.createElement("div",{className:o.placeholderClass,style:{backgroundColor:o.bgColor,...j,...z}}),!o.bgColor&&o.placeholder&&e.createElement("img",{src:o.placeholder,alt:o.alt,className:o.placeholderClass,style:{...j,...z}}),y.isVisible&&e.createElement("picture",null,o.webpSrcSet&&e.createElement("source",{type:"image/webp",srcSet:f(o.webpSrcSet),sizes:y.sizes?`${y.sizes}vw`:void 0}),o.srcSet&&e.createElement("source",{srcSet:f(o.srcSet),sizes:y.sizes?`${y.sizes}vw`:void 0}),e.createElement("img",{ref:a,src:o.src,className:o.imgClass,alt:o.alt,sizes:`${y.sizes}vw`,loading:b?"eager":o.loading,onLoad:w,style:{...j,...I}})))}g.defaultProps={loading:"lazy",fadeIn:!0,fit:"cover",position:"center",height:"100%",durationFadeIn:500,alt:""};export{g as Image};
//# sourceMappingURL=index.es.js.map
